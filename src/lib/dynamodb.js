'use strict';
Object.defineProperty(exports, '__esModule', { value: true });
exports.DocumentClient = exports.DynamoDB = void 0;
const client_dynamodb_1 = require('@aws-sdk/client-dynamodb');
const lib_dynamodb_1 = require('@aws-sdk/lib-dynamodb');
const DEFAULT_PARAMS = {
  region: process.env.AWS_REGION || 'ap-southeast-2',
};
const isTest = (process.env.NODE_ENV || '').toLowerCase() === 'test';
const testConfig = {
  credentials: {
    accessKeyId: process.env.AWS_ACCESS_KEY || 'fake_key',
    secretAccessKey: process.env.AWS_SECRET_KEY || 'secret_key',
  },
  endpoint: 'http://localhost:8000',
  region: process.env.AWS_REGION || 'local',
  sslEnabled: false,
};
exports.DynamoDB = new client_dynamodb_1.DynamoDBClient({
  ...DEFAULT_PARAMS,
  ...(isTest && testConfig),
});
exports.DocumentClient = lib_dynamodb_1.DynamoDBDocumentClient.from(exports.DynamoDB);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHluYW1vZGIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJkeW5hbW9kYi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSw4REFBMEQ7QUFDMUQsd0RBQStEO0FBRS9ELE1BQU0sY0FBYyxHQUFHO0lBQ25CLE1BQU0sRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVUsSUFBSSxnQkFBZ0I7Q0FDckQsQ0FBQztBQUVGLE1BQU0sTUFBTSxHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLElBQUksRUFBRSxDQUFDLENBQUMsV0FBVyxFQUFFLEtBQUssTUFBTSxDQUFDO0FBRXJFLE1BQU0sVUFBVSxHQUFHO0lBQ2YsV0FBVyxFQUFFO1FBQ1QsV0FBVyxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsY0FBYyxJQUFJLFVBQVU7UUFDckQsZUFBZSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsY0FBYyxJQUFJLFlBQVk7S0FDOUQ7SUFDRCxRQUFRLEVBQUUsdUJBQXVCO0lBQ2pDLE1BQU0sRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVUsSUFBSSxPQUFPO0lBQ3pDLFVBQVUsRUFBRSxLQUFLO0NBQ3BCLENBQUM7QUFFVyxRQUFBLFFBQVEsR0FBRyxJQUFJLGdDQUFjLENBQUM7SUFDdkMsR0FBRyxjQUFjO0lBQ2pCLEdBQUcsQ0FBQyxNQUFNLElBQUksVUFBVSxDQUFDO0NBQzVCLENBQUMsQ0FBQztBQUVVLFFBQUEsY0FBYyxHQUFHLHFDQUFzQixDQUFDLElBQUksQ0FBQyxnQkFBUSxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEeW5hbW9EQkNsaWVudCB9IGZyb20gJ0Bhd3Mtc2RrL2NsaWVudC1keW5hbW9kYic7XG5pbXBvcnQgeyBEeW5hbW9EQkRvY3VtZW50Q2xpZW50IH0gZnJvbSAnQGF3cy1zZGsvbGliLWR5bmFtb2RiJztcblxuY29uc3QgREVGQVVMVF9QQVJBTVMgPSB7XG4gICAgcmVnaW9uOiBwcm9jZXNzLmVudi5BV1NfUkVHSU9OIHx8ICdhcC1zb3V0aGVhc3QtMicsXG59O1xuXG5jb25zdCBpc1Rlc3QgPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgfHwgJycpLnRvTG93ZXJDYXNlKCkgPT09ICd0ZXN0JztcblxuY29uc3QgdGVzdENvbmZpZyA9IHtcbiAgICBjcmVkZW50aWFsczoge1xuICAgICAgICBhY2Nlc3NLZXlJZDogcHJvY2Vzcy5lbnYuQVdTX0FDQ0VTU19LRVkgfHwgJ2Zha2Vfa2V5JyxcbiAgICAgICAgc2VjcmV0QWNjZXNzS2V5OiBwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0tFWSB8fCAnc2VjcmV0X2tleScsXG4gICAgfSxcbiAgICBlbmRwb2ludDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMCcsXG4gICAgcmVnaW9uOiBwcm9jZXNzLmVudi5BV1NfUkVHSU9OIHx8ICdsb2NhbCcsXG4gICAgc3NsRW5hYmxlZDogZmFsc2UsXG59O1xuXG5leHBvcnQgY29uc3QgRHluYW1vREIgPSBuZXcgRHluYW1vREJDbGllbnQoe1xuICAgIC4uLkRFRkFVTFRfUEFSQU1TLFxuICAgIC4uLihpc1Rlc3QgJiYgdGVzdENvbmZpZyksXG59KTtcblxuZXhwb3J0IGNvbnN0IERvY3VtZW50Q2xpZW50ID0gRHluYW1vREJEb2N1bWVudENsaWVudC5mcm9tKER5bmFtb0RCKTtcbiJdfQ==
